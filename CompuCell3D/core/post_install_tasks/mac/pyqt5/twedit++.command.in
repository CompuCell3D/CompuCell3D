#!/bin/sh

# echo " "
# echo " dollar-zero AKA the first argument to this .command script is: "
# echo $0
# echo " "
export PYTHON_MINOR_VERSION=@PYTHON_MINOR_VERSION@

cd "${0%/*}"


export PREFIX_CC3D=$(pwd)

current_directory=$(pwd)

cd $PREFIX_CC3D

echo "====> twedit++ working directory: $PREFIX_CC3D"

export PYTHONPATH=

# /Users/m/CC3D_QT5_GIT_install/CompuCell3D-new/lib/CompuCell3DPlugins:/Users/m/CC3D_QT5_GIT_install/CompuCell3D-new/lib/CompuCell3DSteppables:/Users/m/CC3D_GIT_MERGE/CompuCell3D/player/Utilities

export DYLD_LIBRARY_PATH=${PREFIX_CC3D}/lib
export DYLD_LIBRARY_PATH=${PREFIX_CC3D}/lib/python:$DYLD_LIBRARY_PATH

export SWIG_LIB_INSTALL_DIR=${PREFIX_CC3D}/lib/python

export PYTHON_MODULE_PATH=${PREFIX_CC3D}/pythonSetupScripts



export PYTHONPATH=${PREFIX_CC3D}/player:$PYTHONPATH
echo "====> PYTHONPATH directory: $PYTHONPATH"




echo "---- ---- ---- ---- ---- ---- ---- ---- "
echo " setting the PYTHONLIB_SYSTEM shell variable as used by CompuCell3D: "
# export PYTHONLIB_SYSTEM=/System/Library/Frameworks/Python.framework/Versions/2.${PYTHON_MINOR_VERSION}
# ln -s /System/Library/Frameworks/Python.framework/Versions/2.${PYTHON_MINOR_VERSION}/Resources/Python.app/Contents/MacOS/Python ${PREFIX_CC3D}/Twedit++CC3D
# export PYTHON_EXEC=${PREFIX_CC3D}/Twedit++CC3D


osx_version=$(sw_vers -productVersion)
osx_major=$(echo $osx_version | cut -d. -f1)
osx_minor=$(echo $osx_version | cut -d. -f2)

osx_minor=$((osx_minor+0))
osx_major=$((osx_major+0))

if [ $osx_minor -ge 11 ]
then
    echo 'GOT >11'

fi
echo ${osx_major}-${osx_minor}


# if [ $osx_minor -ge 11 ]
# then
#
#     if [ ! -f "${PREFIX_CC3D}/cc3d_python" ]
#     then
#         #cp /usr/bin/python2.${PYTHON_MINOR_VERSION} ${PREFIX_CC3D}/cc3d_python
#         cp /System/Library/Frameworks/Python.framework/Versions/2.${PYTHON_MINOR_VERSION}/Resources/Python.app/Contents/MacOS/Python ${PREFIX_CC3D}/cc3d_python
#     fi
#
#     export PYTHON_EXEC=${PREFIX_CC3D}/cc3d_python
# fi

# export PYTHON_EXEC=python2.${PYTHON_MINOR_VERSION}
echo " ====> PYTHONLIB_SYSTEM: $PYTHONLIB_SYSTEM"


echo "---- ---- ---- ---- ---- ---- ---- ---- "
echo " setting the PATH shell variable as used by CompuCell3D: "
export PATH=${PYTHONLIB_SYSTEM}/bin:$PATH

export PYTHON_EXEC=${PREFIX_CC3D}/python27/bin/python2.7



export TWEDIT_MAJOR_VERSION=0
export TWEDIT_MINOR_VERSION=9
export TWEDIT_BUILD_VERSION=0


${PYTHON_EXEC} ${PREFIX_CC3D}/Twedit++5/twedit_plus_plus_cc3d.py $*


cd ${current_directory}
